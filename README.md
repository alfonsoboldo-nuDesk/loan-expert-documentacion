<p align="center">
  <img src="https://img.shields.io/badge/FastAPI-Backend-009688?style=for-the-badge&logo=fastapi&logoColor=white" alt="FastAPI">
  <img src="https://img.shields.io/badge/Next.js-Frontend-000000?style=for-the-badge&logo=nextdotjs&logoColor=white" alt="Next.js">
  <img src="https://img.shields.io/badge/Gemini_2.0-IA-4285F4?style=for-the-badge&logo=google&logoColor=white" alt="Gemini">
  <img src="https://img.shields.io/badge/Google_Cloud-Hospedado-4285F4?style=for-the-badge&logo=googlecloud&logoColor=white" alt="GCP">
</p>

<h1 align="center">Champions Loan Expert</h1>

<p align="center">
  <strong>Asistente impulsado por IA para los programas hipotecarios non-QM mayoristas de Champions Funding</strong>
</p>

<p align="center">
  <img src="https://img.shields.io/badge/Backend-v2.5.0-blue?style=flat-square" alt="VersiÃ³n Backend">
  <img src="https://img.shields.io/badge/Frontend-v2.5.0-blue?style=flat-square" alt="VersiÃ³n Frontend">
  <img src="https://img.shields.io/badge/Estado-ProducciÃ³n-success?style=flat-square" alt="Estado">
  <img src="https://img.shields.io/badge/Licencia-Propietaria-red?style=flat-square" alt="Licencia">
</p>

---

## ğŸš€ Inicio RÃ¡pido

<table>
<tr>
<td width="120" align="center">
<b>Paso 1</b><br>
<sub>Abrir App</sub>
</td>
<td width="120" align="center">
<b>Paso 2</b><br>
<sub>Iniciar SesiÃ³n</sub>
</td>
<td width="120" align="center">
<b>Paso 3</b><br>
<sub>Hacer Pregunta</sub>
</td>
<td width="120" align="center">
<b>Paso 4</b><br>
<sub>Obtener Respuesta</sub>
</td>
<td width="120" align="center">
<b>Paso 5</b><br>
<sub>Ver Citas</sub>
</td>
</tr>
<tr>
<td align="center">ğŸŒ</td>
<td align="center">ğŸ”</td>
<td align="center">ğŸ’¬</td>
<td align="center">ğŸ¤–</td>
<td align="center">ğŸ“„</td>
</tr>
</table>

### ğŸ”— Enlaces de ProducciÃ³n
```
AplicaciÃ³n: https://champions-frontend-561975502517.us-central1.run.app
Docs API:   https://champions-backend-561975502517.us-central1.run.app/docs
```

---

## ğŸ—ï¸ Arquitectura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Google Cloud Run                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                         FRONTEND (Next.js 14)                           â”‚   â”‚
â”‚   â”‚                      champions-frontend-561975502517                    â”‚   â”‚
â”‚   â”‚                                                                         â”‚   â”‚
â”‚   â”‚   Chat UI â”€â”€â–º Conversaciones â”€â”€â–º Ajustes â”€â”€â–º Panel Admin                â”‚   â”‚
â”‚   â”‚                                                                         â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                       â”‚                                         â”‚
â”‚                            REST API + SSE Streaming                             â”‚
â”‚                                       â”‚                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                          BACKEND (FastAPI)                              â”‚   â”‚
â”‚   â”‚                      champions-backend-561975502517                     â”‚   â”‚
â”‚   â”‚                                                                         â”‚   â”‚
â”‚   â”‚   Auth â”€â”€â–º Chat Service â”€â”€â–º Conversation Service â”€â”€â–º Admin Service      â”‚   â”‚
â”‚   â”‚                                                                         â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                       â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                   â”‚                   â”‚
                    â–¼                   â–¼                   â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Cloud SQL    â”‚   â”‚ Gemini 2.0    â”‚   â”‚    Secret     â”‚
            â”‚  PostgreSQL   â”‚   â”‚ File Search   â”‚   â”‚    Manager    â”‚
            â”‚               â”‚   â”‚               â”‚   â”‚               â”‚
            â”‚ â€¢ Usuarios    â”‚   â”‚ â€¢ Motor RAG   â”‚   â”‚ â€¢ JWT Secret  â”‚
            â”‚ â€¢ Mensajes    â”‚   â”‚ â€¢ 16 Docs     â”‚   â”‚ â€¢ API Keys    â”‚
            â”‚ â€¢ Citas       â”‚   â”‚   Indexados   â”‚   â”‚ â€¢ DB Creds    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### CÃ³mo Funciona

| Paso | Componente | AcciÃ³n |
|:----:|:-----------|:-------|
| 1 | Usuario | Hace pregunta sobre programas de prÃ©stamo |
| 2 | Backend | EnvÃ­a consulta a Gemini con File Search RAG |
| 3 | Gemini | Busca en 16 documentos indexados por contexto |
| 4 | Backend | Transmite respuesta vÃ­a SSE con citas |
| 5 | Frontend | Renderiza respuesta con marcadores de cita clicables |

---

## ğŸ“š DocumentaciÃ³n

| Documento | DescripciÃ³n |
|:---------|:------------|
| ğŸ“– [Arquitectura](./docs/arquitectura.md) | DiseÃ±o del sistema y flujo de datos |
| ğŸ”‘ [Referencia API](./docs/referencia-api.md) | DocumentaciÃ³n de endpoints REST |
| ğŸ“ [Sistema de Enrutamiento de Archivos](./docs/sistema-enrutamiento-archivos.md) | ResoluciÃ³n de IDs de documentos |
| âš™ï¸ [ConfiguraciÃ³n](./docs/configuracion.md) | Variables de entorno y ajustes |
| ğŸ”§ [SoluciÃ³n de Problemas](./docs/solucion-problemas.md) | Problemas comunes y soluciones |
| ğŸ—ºï¸ [Hoja de Ruta](./HOJA-DE-RUTA.md) | Funcionalidades pendientes y mejoras |

---

## ğŸ”‘ CaracterÃ­sticas Principales

<table>
<tr>
<td align="center" width="33%">

### ğŸ¤– RAG con IA
Gemini 2.0 Flash con File Search recupera contexto relevante de 16 documentos de prÃ©stamos indexados

</td>
<td align="center" width="33%">

### ğŸ“„ Sistema de Citas
Cada respuesta incluye referencias clicables a documentos fuente con nÃºmeros de pÃ¡gina

</td>
<td align="center" width="33%">

### ğŸ”’ Acceso por Roles
Tres roles (Rep, Manager, Admin) con permisos granulares para funcionalidades

</td>
</tr>
</table>

---

## ğŸ¯ Programas de PrÃ©stamo Cubiertos

| Programa | Documentos Matrix | GuÃ­as |
|:--------|:-----------------|:-----------|
| **DSCR** | 1-4 Unidades, 5-8 Unidades | Accelerator DSCR |
| **Full Doc** | Full Doc Matrix | GuÃ­as Accelerator |
| **Alt Doc** | Alt Doc Matrix | GuÃ­as Activator |
| **Ally** | Consumer No Ratio | GuÃ­as Ally |
| **Super Jumbo** | Super Jumbo Matrix | GuÃ­as Super Jumbo |
| **Foreign National** | FN Ambassador Matrix | GuÃ­as FN |
| **ITIN** | ITIN Matrix | GuÃ­as ITIN |

---

## ğŸ›  Stack TecnolÃ³gico

<table>
<tr>
<td width="50%">

### Frontend
| TecnologÃ­a | PropÃ³sito |
|------------|---------|
| Next.js 14 | Framework React (App Router) |
| TypeScript | Seguridad de tipos |
| Tailwind CSS | Estilos |
| Zustand | GestiÃ³n de estado |
| Lucide Icons | Ãconos UI |

</td>
<td width="50%">

### Backend
| TecnologÃ­a | PropÃ³sito |
|------------|---------|
| FastAPI | Framework web Python |
| Python 3.11 | Runtime |
| SQLAlchemy | ORM Async |
| Pydantic | ValidaciÃ³n de datos |
| google-genai | SDK de Gemini |

</td>
</tr>
</table>

### Infraestructura
| Componente | Servicio | ID/URL |
|-----------|---------|--------|
| Frontend | Cloud Run | `champions-frontend-561975502517` |
| Backend | Cloud Run | `champions-backend-561975502517` |
| Base de Datos | Cloud SQL | PostgreSQL 14 |
| IA/RAG | Gemini 2.0 Flash | File Search Store |
| Secretos | Secret Manager | JWT, API keys |

---

## âš™ï¸ Operaciones Comunes

<details>
<summary><b>â• Agregar Nuevo Documento de PrÃ©stamo</b></summary>

1. Subir documento a Gemini File Search Store
2. Actualizar `file_search_name_map.json` con mapeo ID â†’ nombre:
   ```json
   {
     "abc123xyz": "Nuevo_Nombre_Documento.pdf"
   }
   ```
3. Redesplegar backend para cargar nuevo mapeo
</details>

<details>
<summary><b>ğŸ” Crear Usuario Admin</b></summary>

```bash
cd backend
python scripts/create_admin.py admin@championsfunding.com
```
</details>

<details>
<summary><b>ğŸ—„ï¸ Ejecutar MigraciÃ³n de Base de Datos</b></summary>

```bash
cd backend
python scripts/run_migration.py           # Aplicar migraciÃ³n
python scripts/run_migration.py --verify  # Verificar estado
python scripts/run_migration.py --rollback # Revertir si es necesario
```
</details>

---

## ğŸ“ Estructura del Repositorio

```
ğŸ“¦ champions-loan-expert-v2-claude
â”œâ”€â”€ ğŸ“„ README.md
â”œâ”€â”€ ğŸ“„ CHANGELOG.md
â”œâ”€â”€ ğŸ“„ HOJA-DE-RUTA.md
â”œâ”€â”€ ğŸ“„ .env.example
â”‚
â”œâ”€â”€ ğŸ“‚ docs/
â”‚   â”œâ”€â”€ ğŸ“– arquitectura.md
â”‚   â”œâ”€â”€ ğŸ”‘ referencia-api.md
â”‚   â”œâ”€â”€ ğŸ“ sistema-enrutamiento-archivos.md
â”‚   â”œâ”€â”€ âš™ï¸ configuracion.md
â”‚   â””â”€â”€ ğŸ”§ solucion-problemas.md
â”‚
â”œâ”€â”€ ğŸ“‚ backend/
â”‚   â”œâ”€â”€ ğŸ“‚ app/
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ api/              # Endpoints REST
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ db/               # ConexiÃ³n a base de datos
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ models/           # SQLAlchemy + Pydantic
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ services/         # LÃ³gica de negocio
â”‚   â”‚   â”œâ”€â”€ config.py
â”‚   â”‚   â””â”€â”€ main.py
â”‚   â”œâ”€â”€ ğŸ“‚ scripts/              # Utilidades admin
â”‚   â”œâ”€â”€ ğŸ“„ file_search_name_map.json
â”‚   â””â”€â”€ ğŸ“„ Dockerfile
â”‚
â”œâ”€â”€ ğŸ“‚ frontend/
â”‚   â”œâ”€â”€ ğŸ“‚ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ app/              # PÃ¡ginas (App Router)
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ components/       # Componentes React
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ lib/              # Cliente API, utilidades
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ store/            # Stores Zustand
â”‚   â”‚   â””â”€â”€ ğŸ“‚ types/            # Definiciones TypeScript
â”‚   â””â”€â”€ ğŸ“„ Dockerfile
â”‚
â””â”€â”€ ğŸ“‚ infrastructure/           # Terraform (opcional)
```

---

## ğŸ”— Enlaces RÃ¡pidos

<table>
<tr>
<td align="center">
<a href="https://champions-frontend-561975502517.us-central1.run.app">
<img src="https://img.shields.io/badge/Abrir-AplicaciÃ³n-4CAF50?style=for-the-badge" alt="App">
</a>
</td>
<td align="center">
<a href="https://champions-backend-561975502517.us-central1.run.app/docs">
<img src="https://img.shields.io/badge/Ver-Docs_API-009688?style=for-the-badge" alt="API">
</a>
</td>
<td align="center">
<a href="./HOJA-DE-RUTA.md">
<img src="https://img.shields.io/badge/Ver-Hoja_de_Ruta-FF6D5A?style=for-the-badge" alt="Roadmap">
</a>
</td>
</tr>
</table>

---

## ğŸ‘¥ Roles y Permisos

| Funcionalidad | Rep | Manager | Admin |
|---------|:---:|:-------:|:-----:|
| Chat con IA | âœ… | âœ… | âœ… |
| Ver conversaciones propias | âœ… | âœ… | âœ… |
| Exportar conversaciones | âœ… | âœ… | âœ… |
| Ver analytics del equipo | âŒ | âœ… | âœ… |
| Ver todas las conversaciones | âŒ | âœ… | âœ… |
| Gestionar usuarios | âŒ | âŒ | âœ… |
| Eliminar conversaciones | âŒ | âŒ | âœ… |
| Cambiar roles de usuario | âŒ | âŒ | âœ… |
| Invitar nuevos usuarios | âŒ | âŒ | ğŸ”œ |

---

## ğŸ“Š Versiones Actuales

| Componente | VersiÃ³n | Ãšltima ActualizaciÃ³n |
|-----------|---------|--------------|
| Backend | v2.5.0 | 2025-01-27 |
| Frontend | v2.5.0 | 2025-01-27 |

Ver [CHANGELOG.md](./CHANGELOG.md) para notas de versiÃ³n detalladas.

---

<p align="center">
  <sub>Construido con â¤ï¸ por nuDesk LLC</sub><br>
  <sub>Propietario â€” Champions Funding</sub>
</p>
